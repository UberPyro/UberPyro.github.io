<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Functions &amp; Quotation - The Prowl Programming Language</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../expressions.html"><strong aria-hidden="true">2.</strong> Expressions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../expressions/values.html"><strong aria-hidden="true">2.1.</strong> Values</a></li><li class="chapter-item expanded "><a href="../expressions/functions.html" class="active"><strong aria-hidden="true">2.2.</strong> Functions &amp; Quotation</a></li><li class="chapter-item expanded "><a href="../expressions/bindings.html"><strong aria-hidden="true">2.3.</strong> Bindings</a></li><li class="chapter-item expanded "><a href="../expressions/data.html"><strong aria-hidden="true">2.4.</strong> Data</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Prowl Programming Language</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="functions-and-quotation"><a class="header" href="#functions-and-quotation">Functions and Quotation</a></h1>
<p>While values are technically functions in concatenative languages, what most programmers mean when they talk about functions are sections of code that are called with <em>inputs</em>. Here, we are interested in functions that may pop values off the stack before pushing to the stack. </p>
<p>Functions can be represented both symbolically as operators and in words as identifiers. The operators provide a short syntax for the most commonly used functions, but they tend to be less explicit and friendly than identifiers, especially for the less commonly used operations. </p>
<p>Functions take a stack in as input and return a stack as output. They destructure the stack on input, popping values off, and reconstruct the stack on output, pushing values to it. For some stack <code>r</code> and some cons symbol <code>:</code>, we can think of these functions as some form of <code>r : a : b : c... -&gt; r : x : y : z...</code>, where <code>-&gt;</code> represents the divide between what the function takes in and returns. It turns out that including the type of the stack in the type system is semidecidable (checkable, but not inferrable) because it is a form of polymorphic recursion. We therefore place limitations on what this <code>r</code> may be, and sugar it away along with the conses. Therefore our previous type signature would be <code>a b c... -&gt; x y z...</code>. </p>
<h2 id="operators"><a class="header" href="#operators">Operators</a></h2>
<p>Prowl has both infix and reverse polish notation (RPN) operators. Infix operators are included for convenience - there are only a few of them and they are for basic operations. Everything else is RPN, including all custom defined operators. </p>
<pre><code>val one = 6 - 3 - 2
val five = 6 - (3 - 2)
</code></pre>
<p>Operators can be sectioned Haskell-style. Sectioned operators become RPN. </p>
<pre><code>val one = 6 3 (-) 2 (-)
val one = 6 (-3) (-2)
val one = 6 3 (-) - 2
val five = 6 - 3 2 (-)  /; RPN is faster than infix ;/
</code></pre>
<h2 id="quotation"><a class="header" href="#quotation">Quotation</a></h2>
<p>Quotation is denoted by <code>&lt; ... &gt;</code>. It pauses execution and creates a closure, conceptually transforming a computation into a value. It can also section operators, and be destructured in patterns. </p>
<pre><code>val &lt;triang&gt; = &lt;(*2) (+1)&gt; /; the function that multiplies by two and adds one ;/
val x y = 3 triang 0 triang triang /; 7 3 ;/
</code></pre>
<h2 id="stack-lambdas"><a class="header" href="#stack-lambdas">Stack-Lambdas</a></h2>
<p>Stack-Lambdas peel variables off the stack and (immediately) execute their contents. </p>
<pre><code>val one = 5 6 {x y -&gt; y x} (-)

/; alternatively ;/
val &lt;swap&gt; = &lt;{x y -&gt; y x}&gt;
val one = 5 6 swap (-)`
</code></pre>
<p>We introduce as sugar the <code>fn</code> statement, which automatically quotes and dequotes its body. Unlike <code>val</code>, <code>fn</code> allows you to &quot;run off the end of the stack&quot;, as it is for creating functions that consume inputs. It also supports arguments for functions rather than stack destructuring like <code>val</code>. </p>
<pre><code>fn swap = {x y -&gt; y x}

/; alternatively ;/
fn x y swap = y x

val one = 5 6 swap (-)
</code></pre>
<p><code>fn</code> also makes it easy to reason about the types of functions. Where lowercase identifiers in types represent type values and type primitives, uppercase identifiers represent generic arguments. </p>
<pre><code>fn swap - A B -&gt; B A = {x y -&gt; y z}
fn (x - A) (y - B) swap - B A = y x
fn add - int int -&gt; int = (+)
fn pred - int -&gt; int = (-1)
</code></pre>
<p>Additionally, <code>val</code> and <code>fn</code> both support recursive definitions automatically.</p>
<pre><code>fn fac = {
  0 -&gt; 1,
  n -&gt; n * (n-1) fac
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../expressions/values.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../expressions/bindings.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../expressions/values.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../expressions/bindings.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
