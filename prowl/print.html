<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Prowl Programming Language</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="expressions.html"><strong aria-hidden="true">2.</strong> Expression Language</a></li><li class="chapter-item expanded "><a href="structures.html"><strong aria-hidden="true">3.</strong> Data Structures</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Prowl Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>The <a href="https://github.com/UberPyro/prowlc">Prowl Programming Language</a> is a pure concatenative-functional systems programming language that uses a row-polymorphic metatyping system to tune the operational semantics of data. The main inspirations are OCaml, Joy, Rust, and Haskell, but it pilfers ideas from many languages. </p>
<p>Where applicative languages typically have function abstraction, function application, and a variety of values, <a href="https://concatenative.org/wiki/view/Concatenative%20language">concatenative languages</a> only have composition and functions of stacks. This reduces programing down to a streamlined and highly composable core. </p>
<p>Functional programming makes habitual use of higher-order functions, recursion, and immutable data structures. Prowl hybridizes functional and concatenative programming: this means lambdas operate on the stack and quotation is the primitive for closures. Prowl upholds both traditions, incorporating immutable structures, algebraic data types, first-class and higher-order functions, recursion, type inference, type programming, and purity from the functional side, and the syntax, semantics, quotations, macros, and combinators from the concatenative side. </p>
<p>A systems programming language should have an implementation that stands on its own, sporting good performance and good control over the hardware. Prowl aims to be faster than Go in speed via heavy optimizations and LLVM, and to take control of code with it's metatypes. We also stick to forms of GC with reliable performance. </p>
<p>Prowl's metatype system allows it to tag data that tunes it's operational semantics when processed. Data can be marked affine, lazy, and compile-time, and operators polymorphic over these metatypes will unify to match those semantics. </p>
<p>Prowl uses the affine metatype to enable safe manipulations of mutable data and uphold purity. This means that imperative structures and computations can be reasoned about in a pseudo-functional way. Slices will be optimized to allow the handling of arrays to feel as functional as possible, with the key ability to split ownership and arrays in unison. Additionally, affine types will provide a pure and explicit way to handle effects. Substructure polymorphism more generally allows functions to operate on both mutable and immutable data without needing two definitions: a <code>map</code> will be done in-place on a mutable array but non-destructively on a linked list, due to how the types unify. </p>
<p>Prowl similarly uses strictness polymorphism to control when evaluation is eager, lazy, or memoized. Certain monoids must be either eager or lazy in order to execute with optimal performance, this means monoidal append, represented <code>++</code>, will take up the semantics of the operands. </p>
<p>Volatility or dynamism polymorphism determines when code is executed at compile-time or runtime. This allows code reuse between those modes, and for this behavior to be highly visible to the programmer. </p>
<p>There are many other kinds of polymorphism planned that together can provide fine control over a system. </p>
<p>Prowl anticipates the use of <a href="https://people.mpi-sws.org/%7Edreyer/papers/mtc/main-long.pdf">modular typeclasses</a> to achieve more advanced forms of polymorphism. Haskell-style typeclasses in combination with a <a href="https://people.mpi-sws.org/%7Erossberg/mixml/mixml-toplas.pdf">modern ML-style module system</a> should enable very powerful abstractions, enough for any endeavor. </p>
<p>Should we get this far, Prowl will include affine continuations, mutex, and join-calculus concurrency primitives to provide a range of ways to employ concurrency with different levels of control. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expression-language"><a class="header" href="#expression-language">Expression Language</a></h1>
<pre><code>/; This is a comment ;/

/; Comments are 
  multiline ;/

/; Comments are /; nestible ;/;/
</code></pre>
<p>Expressions are contained by most statements. Use the <code>val</code> statement for variable bindings. All bindings are immutable. </p>
<p>Let's kick off with some basic literals. </p>
<pre><code>val x = 0  /; int ;/
val y = &quot;hello&quot;  /; str ;/
val z = 'z'  /; char ;/
val w = 0.5  /; float ;/
val t = .true  /; variants are . preceded ;/
</code></pre>
<p>In a stack languages, everything is a function. Literals are functions that push to the stack. <code>val</code> acts like an empty stack and is capable of destructuring the resulting stack. </p>
<pre><code>val x y z = 7 8 9  /; x == 7, y == 8, z == 9 ;/
</code></pre>
<p>The language includes both infix and reverse polish notation (RPN) operators. In general, all higher-order operators are RPN. Only RPN operators can be defined custom. 
Infix operators can be sectioned Haskell-style. All sectioned operators become RPN. </p>
<pre><code>val one  = 6 - 3 - 2
val one  = 6 3 (-) 2 (-)
val one  = 6 (-3) (-2)
val one  = 6 3 (-) - 2 
val five = 6 - 3 2 (-)  /; RPN chains have greater precedence than infix ;/
</code></pre>
<p>Quotation is denoted by <code>&lt; ... &gt;</code>. It pauses execution and creates a closure. It can also section operators. Quotation can also be destructured in patterns. </p>
<pre><code>val &lt;triang&gt; = &lt;(*2) (+1)&gt;  /; the function that multiplies by two and adds one ;/
val x y = 3 triang 0 triang triang  /; 7 3 ;/
</code></pre>
<p>Stack-Lambdas peel variables off the stack and (immediately) execute their contents. </p>
<pre><code>val one = 5 6 {x y -&gt; y x} (-)

/; Alternatively ;/
val &lt;swap&gt; = &lt;{x y -&gt; y x}&gt;
val one = 5 6 swap (-)
</code></pre>
<p>We introduce as sugar the <code>fn</code> statement, which autoquotes / dequotes and has arguments instead of stack destructuring. </p>
<pre><code>fn swap = {x y -&gt; y x}

/; alternatively ;/
fn x y swap = y x

val one = 5 6 swap (-)
</code></pre>
<p>Lambdas can also do case analysis. </p>
<pre><code>val notEqual = (5 == 6) {
  .true  -&gt; &quot;equal!&quot;,
  .false -&gt; &quot;not equal...&quot;
}
</code></pre>
<p><code>val</code> and <code>fn</code> both support recursive definitions automatically. </p>
<pre><code>fn fac = {
  0 -&gt; 1,
  n -&gt; n * (n-1) fac
}
</code></pre>
<p>Lastly, <code>let</code> expressions are a special expression that can lower a statement into the expression language. Let expressions are always terminated with <code>in</code>. With the absence of a statement keyword, <code>val</code> is always implied. </p>
<pre><code>fn x y pythag = 
  let fn sqr = dup (*) in
  let norm_sqr = x sqr + y sqr in
  norm_sqr sqrt

/; or more idiomatically ;/
fn x y pythag = (x**2 + y**2) sqrt
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-structures"><a class="header" href="#data-structures">Data Structures</a></h1>
<h2 id="algebraic-data-types"><a class="header" href="#algebraic-data-types">Algebraic Data Types</a></h2>
<p>Monomorphic ADTs require data definitions. We introduce the data statement early for them. </p>
<p>Here is a simple example: </p>
<pre><code>data direction = .up, .down, .left, .right
</code></pre>
<p>Lambdas can perform case analysis on variants. </p>
<pre><code>val up = .up {
  .up -&gt; &quot;up&quot;,
  .down -&gt; &quot;down&quot;,
  _ -&gt; &quot;not vertical&quot;
}
</code></pre>
<p><code>data a list = any a in .nil, a list a .cons</code></p>
<p><code>.nil</code> takes in 0 constructors and <code>.cons</code> takes in 2. Note the RPN. </p>
<pre><code>val lst = .nil 0 .cons 3 .cons 5 .cons  /; list[5, 3, 0] ;/
</code></pre>
<p>Records are similar. Records can pun names when the data id matches the record field. </p>
<pre><code>data color = .brown, .black, .grey, .cream

data cat = .{
  color,
  name -&gt; str
}

val oreo = .{
  color -&gt; .cream,
  name -&gt; &quot;Oreo&quot;
}
</code></pre>
<p>Records can also be destrucured</p>
<pre><code>val cream = 
  let {color} = oreo in  /; punning + partial destructuring ;/
  color
</code></pre>
<p>Boolean and Order are both variants. </p>
<pre><code>val less = (5 ?= 6) {
  .gt -&gt; &quot;more&quot;,
  .eq -&gt; &quot;same&quot;,
  .lt -&gt; &quot;less&quot;
}
</code></pre>
<p>Polymorphic Variants and Records do not require type definitions. They are less memory safe if without manual annotation, but more flexible. Their types can be unioned as in OCaml. </p>
<pre><code>val newFlavor = :strawberry {
  :vanilla -&gt; &quot;vanilla&quot;,
  :chocolate -&gt; &quot;chocolate&quot;,
  _ -&gt; &quot;new flavor&quot; /; default case required ;/
}
</code></pre>
<h2 id="collections"><a class="header" href="#collections">Collections</a></h2>
<p>Array literals are simply defined with <code>[ ... ]</code>. </p>
<pre><code>val arr = [1, 2, 3, 4, 5]
</code></pre>
<p><code>get</code> <code>set</code> and <code>upd</code> allow for the getting, setting, and updating of specific values. <code>!</code> deep-clones the structure. </p>
<pre><code>val arrNew = arr ! 0 5 set 2 &lt;+2&gt; upd  /; [5, 2, 5, 4, 5] ;/
val two = arrNew 1 get
</code></pre>
<p>We have a simple macro system that makes it easy to declare new structures. </p>
<pre><code>val lst = list[3, 4, 5]  /; singly-linked list ;/
val sq = seq[7, 6, 5]  /; finger-tree sequence ;/
val dq = deque[6, 5, 7, 4]  /; double-ended queue ;/
val dynarr = dyn[3, 5, 6]  /; dynamically resizing array ;/
val mapping = hmap{2 -&gt; 5, 3 -&gt; 1}  /; persistent hashmap ;/
val dict = htbl{6 -&gt; 7, 2 -&gt; 4}  /; in-place hashtable ;/
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
