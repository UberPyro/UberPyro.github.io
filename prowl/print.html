<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Prowl Programming Language</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="expressions.html"><strong aria-hidden="true">2.</strong> Expressions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="expressions/values.html"><strong aria-hidden="true">2.1.</strong> Values</a></li><li class="chapter-item expanded "><a href="expressions/functions.html"><strong aria-hidden="true">2.2.</strong> Functions</a></li><li class="chapter-item expanded "><a href="expressions/controlflow.html"><strong aria-hidden="true">2.3.</strong> Control Flow</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Prowl Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>How can the stack-based paradigm be made more modern, more readable, more expressive, and more productive? Â The <a href="https://github.com/UberPyro/prowl">Prowl Language</a> sets out to answer this question, taking influences from functional programing and other <a href="https://concatenative.org/wiki/view/Concatenative%20language">concatenative languages</a> to take the paradigm to the next level.</p>
<p>Prowl has 3 major influences that you should know about:</p>
<ul>
<li>
<p><a href="http://kittenlang.org/">The Kitten Language</a></p>
</li>
<li>
<p><a href="https://github.com/catseye/Vinegar">The Vinegar Language</a></p>
</li>
<li>
<p><a href="https://github.com/kkos/oniguruma/blob/master/doc/RE">Oniguruma Regex</a></p>
</li>
</ul>
<p>The last one may come as a surprise to you, but indeed, Prowl is a stack-based language that uses <em>regex for control flow</em>. How is this possible? It all starts with the innovation made by Vinegar:</p>
<ul>
<li>All operations can fail</li>
</ul>
<p>In a concatenative language, all <em>words</em> are typically thought of as functions <code>Stack -&gt; Stack</code> (or equivalently, as a stack effect). However, if we allow functions that can fail, this changes to <code>Stack -&gt; Maybe Stack</code>, creating a failure state we can match on. Consequently, we use alternation <code>|</code> as the means of handling: if <code>a</code> fails in <code>a | b</code>, then b is run.</p>
<p>While this alone helps to provide a better structure to the existing stack-based paradigm, we can do even better. It turns out that concatenation and alternation of programs corresponds almost exactly to concatenation and alternation of regexes, including the quantifiers derived from them. <code>a?</code> attempts to run <code>a</code> but does nothing if it fails, <code>b*</code> will keep running b <em>until</em> it fails; we can repurpose a lot of the syntax and work done on regexes to provide a more expressive control flow for our language.</p>
<p>In addition to this extension of the paradigm, we take great inspiration from the spirit of Kitten in designing the language. We use a clean syntax inspired greatly from MLs to help create more readable structures; we use expressive elements such as infix, binding expressions, and binding operators to create an experience less affected by the workings of the stack machine and enable more expressive styles. We plan to introduce <a href="https://people.mpi-sws.org/%7Erossberg/mixml/mixml-toplas.pdf">ML-style modules</a> as a means of abstraction and <a href="https://people.mpi-sws.org/%7Edreyer/papers/mtc/main-long.pdf">modular typeclasses</a> to achieve polymorphism.</p>
<p>While the language is still in very early stages, an LLVM backend is planned for high-performance programming, and systems features are planned. Â Its unique execution model allows us to escape the concept of function calls entirely â the regex of programs can compile to a DFA, allowing state transitions to become gotos and forgoing the need for a call stack or return addresses. The language is still TC as (heap-allocated) data stacks can be used to carry out general recursion. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expressions"><a class="header" href="#expressions">Expressions</a></h1>
<h2 id="concatenative-programming"><a class="header" href="#concatenative-programming">Concatenative Programming</a></h2>
<p>Prowl is a stack-based programming language. If you are not familiar with the paradigm, I would recommend you learn about it first by checking out some of the links in the introduction before moving on. </p>
<h2 id="comments"><a class="header" href="#comments">Comments</a></h2>
<p>Let's begin our tour of the language with the comment syntax. </p>
<pre><code>/* This is a comment */

/* Comments are 
multiline */

/* Comments can be /* nested */*/
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="values"><a class="header" href="#values">Values</a></h1>
<h2 id="literals"><a class="header" href="#literals">Literals</a></h2>
<p>Following the concatenative tradition, literals are functions that push the element they represent to the stack. </p>
<pre><code>5 /* int */
&quot;Hello&quot; /* str */
</code></pre>
<h2 id="arithmetic"><a class="header" href="#arithmetic">Arithmetic</a></h2>
<p>Prowl uses infix operators as the go-to for arithmetic. Any infix operator can be made RPN via <em>sectioning</em> (wrapping in parentheses). </p>
<pre><code>5 - 1 * 2

==&gt; 3

5 1 (-) 2 (*)

==&gt; 8

5 (- 1) (* 2)

==&gt; 8
</code></pre>
<h2 id="bindings"><a class="header" href="#bindings">Bindings</a></h2>
<p>Prowl has both <code>let</code> and <code>as</code> expressions. <code>let name = e1 -&gt; e2</code> evaluates <em>e1</em> and substitutes it for <code>name</code> in <em>e2</em>. </p>
<pre><code>let x = 5 -&gt; x - 1

==&gt; 4

8 (- 1) as y -&gt;
y * 2

==&gt; 14
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<h2 id="let-functions"><a class="header" href="#let-functions">Let Functions</a></h2>
<p>When a <code>let</code> expression is given arguments, it becomes a function. </p>
<pre><code>let norm-sqr x y = x ** 2 + y ** 2 -&gt; 

3 4 norm-sqr

==&gt; 25
</code></pre>
<h2 id="concatenative-combinators"><a class="header" href="#concatenative-combinators">Concatenative Combinators</a></h2>
<p>Prowl implements a highly sugared version of the stack operators, meant to be used as a complete basis. These are useful for writing code in a point-free style. </p>
<ul>
<li><code>^</code> Dup</li>
<li><code>_</code> Zap</li>
<li><code>%</code> Swap</li>
<li><code>$</code> Run</li>
</ul>
<p>These operators can be written together without spaces. When they are followed immediately by a number, they change their behavior: </p>
<ul>
<li><code>^N</code> Pushes a copy of the Nth element to the stack (the top element is #1, increasing as we go down)</li>
<li><code>_N</code> Deletes the Nth element on the stack</li>
<li><code>$N</code> Calls (and deletes) the Nth element on the stack</li>
<li><code>%3</code> is Rot. </li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h1>
<p>Prowl is unique in that it uses regex for control flow. </p>
<h2 id="n-quantifier"><a class="header" href="#n-quantifier">N Quantifier</a></h2>
<p>The n quantifier <code>{n}</code> corresponds to <code>for</code> loops in imperative code. In regex, it stipulates a phrase must occur n times. In Prowl, it composes a function with itself <code>n</code> times. </p>
<pre><code>let s x = x + 1 -&gt;
5 s{4}

==&gt; 9
</code></pre>
<p>The above example uses <code>s{4}</code> to call the successor function 4 times. There must be no space between the word and the opening brace, as with all quantifiers. </p>
<pre><code>let fac-step a m = a * m &amp; m - 1
and fac n = 1 n fac-step{n} _ -&gt; 
to-int fac
</code></pre>
<p>This code computes factorial, provided a number as a command line argument. </p>
<h2 id="failure--alternations"><a class="header" href="#failure--alternations">Failure &amp; Alternations</a></h2>
<p>Some operators will fail on some input. For example, the N Quantifier is guarenteed to fail on any N less than 0. Alternations can be used as a means to handle program failure. <code>a | b</code> will begin by attempting <code>a</code>. If <code>a</code> succeds, the program carries on and <code>b</code> is never ran. If <code>a</code> fails, then <code>b</code> is ran. If <code>b</code> fails than the whole expression fails. </p>
<pre><code>let fib-step m n = m + n &amp; m -&gt; 
let fib n = 1 0 fib-step{n - 1} _ | 0 -&gt;
to-int fib
</code></pre>
<p>The above code computes the nth Fibonacci number, where n is a command line argument. It uses the failure of the N Quantifier in order to elegantly handle the 0 case. </p>
<h2 id="other-quantifiers"><a class="header" href="#other-quantifiers">Other Quantifiers</a></h2>
<p>Regex also includes <code>+</code> and <code>*</code>, the KIeene star. <code>*</code> will compose a function with itself until it fails, upon which the program carries on with the last successful run. <em>Additionally</em>, if any code concatenated past the <code>*</code> fails, <em>the program will backtrack and undue compositions until the program succeeds, or the entire sequence is unwinded and consequently fails</em>. <code>+</code> behaves the same, except the first run must succeed. While this is a tricky rule that can introduce bugs into your program, it turns out that Kleene star for recursion introduces some really nice properties into implementations that are completely unexpected - as we'll see later, <code>map</code> and <code>map-while</code> are the same in this language! </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
